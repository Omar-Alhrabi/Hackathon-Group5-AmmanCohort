<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحة الأنشطة - منصة خير رمضان</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Google Fonts for Arabic -->
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <!-- Custom CSS -->
    <style>
        body {
            font-family: 'Tajawal', sans-serif;
        }
        .navbar, .footer {
            background-color: #1a2b49;
        }
        .navbar-brand, .nav-link, .footer a {
            color: white !important;
        }
        .nav-link:hover {
            color: #ffd700 !important;
        }
        .sidebar {
            background-color: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            height: fit-content;
        }
        .card img {
            height: 150px; /* Reduced from 200px to make cards smaller */
            object-fit: cover;
        }
        .card-title {
            font-size: 1.1rem; /* Slightly smaller title */
        }
        .card-text {
            font-size: 0.9rem; /* Smaller text */
        }
        .btn {
            font-size: 0.9rem; /* Smaller button text */
            padding: 5px 10px; /* Adjusted padding */
        }
        .section-padding {
            padding: 60px 0;
        }
    </style>
</head>
<body>

    <!-- Navbar -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <!-- Logo -->
            <a class="navbar-brand" href="/">طرود الخير</a>
    
            <!-- Toggler for Mobile -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent" aria-controls="navbarContent" aria-expanded="false" aria-label="تبديل التنقل">
                <span class="navbar-toggler-icon"></span>
            </button>
    
            <!-- Navbar Content -->
            <div class="collapse navbar-collapse" id="navbarContent">
                <!-- Navigation Links -->
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="#learn">فرص التطوع</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#profile">فرص التبرع</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#community">المجتمع</a>
                    </li>
                </ul>
    
                <!-- Conditional Authentication Buttons -->
                <div class="d-flex" id="authButtons">
                    <!-- This section will be dynamically replaced based on user session -->
                </div>
            </div>
        </div>
    </nav>

    <!-- Activities Section -->
    <section class="section-padding" style="padding-top: 100px;">
        <div class="container">
            <h1 class="text-center mb-5">استكشف الأنشطة الرمضانية</h1>
            <div class="row">
                <!-- Sidebar Filter -->
                <div class="col-lg-3 col-md-4 mb-4">
                    <div class="sidebar">
                        <h4 class="mb-4">تصفية الأنشطة</h4>
                        <div class="mb-3">
                            <label for="category" class="form-label">الفئة</label>
                            <select class="form-select" id="category">
                                <option value="">جميع الفئات</option>
                                <option value="iftar">توزيع وجبات الإفطار</option>
                                <option value="charity">تقديم الصدقات</option>
                                <option value="events">تنظيم فعاليات رمضانية</option>
                            </select>
                        </div>
                        <div class="mb-3">
                            <label for="date" class="form-label">التاريخ</label>
                            <input type="date" class="form-control" id="date">
                        </div>
                        <div class="mb-3">
                            <label for="location" class="form-label">الموقع</label>
                            <input type="text" class="form-control" id="location" placeholder="أدخل المدينة">
                        </div>
                        <button class="btn btn-primary w-100">تطبيق الفلتر</button>
                    </div>
                </div>

                <!-- Activities List -->
                <div class="col-lg-9 col-md-8">
                    <div id="activities-container" class="row">
                        <!-- Activity 1 -->
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <img src="400x150.svg" class="card-img-top" alt="توزيع وجبات الإفطار">
                                <div class="card-body">
                                    <h5 class="card-title">توزيع وجبات الإفطار</h5>
                                    <p class="card-text">التاريخ: 20 مارس 2025<br>الموقع: الرياض<br>الوصف: شارك في إفطار الصائمين.</p>
                                    <a href="#apply" class="btn btn-primary">تقدم بطلب</a>
                                </div>
                            </div>
                        </div>
                        <!-- Activity 2 -->
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <img src="400x150.svg" class="card-img-top" alt="تقديم الصدقات">
                                <div class="card-body">
                                    <h5 class="card-title">تقديم الصدقات</h5>
                                    <p class="card-text">التاريخ: 25 مارس 2025<br>الموقع: جدة<br>الوصف: تبرع لدعم المحتاجين.</p>
                                    <a href="#apply" class="btn btn-primary">تقدم بطلب</a>
                                </div>
                            </div>
                        </div>
                        <!-- Activity 3 -->
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <img src="400x150.svg" class="card-img-top" alt="تنظيم فعاليات رمضانية">
                                <div class="card-body">
                                    <h5 class="card-title">تنظيم فعاليات رمضانية</h5>
                                    <p class="card-text">التاريخ: 30 مارس 2025<br>الموقع: الدمام<br>الوصف: إحياء ليالي رمضان.</p>
                                    <a href="#apply" class="btn btn-primary">تقدم بطلب</a>
                                </div>
                            </div>
                        </div>
                        <!-- Activity 4 -->
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <img src="400x150.svg" class="card-img-top" alt="إفطار جماعي">
                                <div class="card-body">
                                    <h5 class="card-title">إفطار جماعي</h5>
                                    <p class="card-text">التاريخ: 22 مارس 2025<br>الموقع: مكة<br>الوصف: إفطار جماعي للعائلات.</p>
                                    <a href="#apply" class="btn btn-primary">تقدم بطلب</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container text-center">
            <div class="row">
                <div class="col-md-4">
                    <p><a href="#about" class="text-white">من نحن</a> | <a href="#faq" class="text-white">الأسئلة الشائعة</a></p>
                </div>
                <div class="col-md-4">
                    <p><a href="#contact" class="text-white">تواصل معنا</a> | <a href="#privacy" class="text-white">سياسة الخصوصية</a> | <a href="#terms" class="text-white">الشروط</a></p>
                </div>
                <div class="col-md-4">
                    <p>تابعنا: <a href="#" class="text-white">فيسبوك</a> | <a href="#" class="text-white">تويتر</a></p>
                </div>
            </div>
        </div>
    </footer>
<!-- test work for upload to git hub -->
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const activitiesContainer = document.getElementById("activities-container");
            const categoryFilter = document.getElementById("category");
            const dateFilter = document.getElementById("date");
            const locationFilter = document.getElementById("location");
            const filterButton = document.querySelector(".btn-primary.w-100");
    
            let allActivities = [];
    
            // Load activities from JSON file
            fetch("data/activities.json")
                .then(response => response.json())
                .then(data => {
                    allActivities = data;
                    displayActivities(allActivities); // Display all activities initially
                })
                .catch(error => console.error("Error loading activities:", error));
    
            function displayActivities(activities) {
                activitiesContainer.innerHTML = ""; // Clear existing content
                activities.forEach(activity => {
                    const cardHTML = `
                        <div class="col-md-4 mb-4">
                            <div class="card">
                                <img src="${activity.image}" class="card-img-top" alt="${activity.title}">
                                <div class="card-body">
                                    <h5 class="card-title">${activity.title}</h5>
                                    <p class="card-text">
                                        <strong>التاريخ:</strong> ${activity.date}<br>
                                        <strong>الموقع:</strong> ${activity.location}<br>
                                        <strong>الوصف:</strong> ${activity.description}
                                    </p>
                                    <a href="#apply" class="btn btn-primary">تقدم بطلب</a>
                                </div>
                            </div>
                        </div>
                    `;
                    activitiesContainer.innerHTML += cardHTML;
                });
            }
    
            filterButton.addEventListener("click", function () {
                const selectedCategory = categoryFilter.value;
                const selectedDate = dateFilter.value;
                const selectedLocation = locationFilter.value.trim().toLowerCase();
    
                const filteredActivities = allActivities.filter(activity => {
                    const matchesCategory = selectedCategory === "" || activity.category === selectedCategory;
                    const matchesDate = selectedDate === "" || activity.date === selectedDate;
                    const matchesLocation = selectedLocation === "" || activity.location.toLowerCase().includes(selectedLocation);
                    return matchesCategory && matchesDate && matchesLocation;
                });
    
                displayActivities(filteredActivities);
            });
        });
        document.addEventListener("DOMContentLoaded", function() {
        const currentUser = getCurrentUser(); 
        const authButtonsContainer = document.getElementById('authButtons');
        
        if (currentUser) {
       
            authButtonsContainer.innerHTML = `
                <span class="text-light me-3 d-flex align-items-center">مرحباً ${currentUser.fullName}</span>
                <button onclick="logout()" class="btn btn-outline-light">تسجيل الخروج</button>
            `;
        } else {
           
            authButtonsContainer.innerHTML = `
                <a href="/register.html" class="btn btn-outline-light me-2">تسجيل</a>
                <a href="/login.html" class="btn btn-primary">تسجيل الدخول</a>
            `;
        }
    });
    
    function getCurrentUser() {
        const userStr = localStorage.getItem('currentUser');
        return userStr ? JSON.parse(userStr) : null;
    }
    
    function logout() {
        localStorage.removeItem('currentUser');
        window.location.reload();
    }
    </script>
    
    
</body>
</html>